$(document).ready(function(){function e(e,a,t){var i='<div id="module'+t+'" class="panel panel--module panel--highlight is-active" data-module="'+t+'"><div class="panel-header"><i class="panel__icon js-sort panel__icon--sort fa fa-bars"></i><h2 class="js-mirror panel-title js-panelTitle">'+e+'</h2><div class="pull-right"><i class="panel__icon is-clickable fa fa-expand js-collaspe"></i><i class="panel__icon is-clickable fa fa-times-circle js-delete"></i></div></div><div class="panel-body contrast"><div class="panel-content">'+a+"</div></div></div>";return i}$("#first-time").dialog({autoOpen:!0,modal:!0,minWidth:700,resizable:!1,draggable:!1,open:function(e,a){$(this).parent().addClass("animated bounceInDown")}});var a=($("#livePreview"),$("#previewContent"),$("#campaignLogo"),$("#campaignTitle"),$("#campaignDescription"),$("#campaignSections"),$("#campaignBrand"),$(".js-subSection"),'<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Visit Facebook Fanpage"></div><div class="input-container"><label class="is-required">Enter Fanpage URL</label><input class="width-1-1" type="text"></div>'),t='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Follow Twitter Account"></div><div class="input-container"><label class="is-required">Enter Twitter Handle</label><input class="width-1-1" type="text" placeholder="@twitterhandle"></div>',i='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Follow Pinterest Account"></div><div class="input-container"><label class="is-required">Enter Pinterest Username</label><input class="width-1-1" type="text" placeholder="pinterestName"></div>',l='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Follow Instagram Account"></div><div class="input-container"><label class="is-required">Enter Instagram Username</label><input class="width-1-1" type="text" placeholder="@instragramName"></div>',s='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Visit Website"></div><div class="input-container"><label class="is-required">Enter Website URL</label><input class="width-1-1" type="text" placeholder="www.websiteurl.com"></div>',o='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Watch Youtube Video"></div><div class="input-container widget-description"><label class="is-required">Youtube Embed Code</label><textarea class="width-1-1" name="" cols="30" rows="4"></textarea></div>',n='<div class="input-container"><label class="">Entry Label</label><input class="js-mirrorInput width-1-1" data-mirror="Header" type="text" placeholder="Watch Video Playlist"></div><div class="input-container widget-description"><label class="is-required">Video Playlist Embed Code</label><textarea class="width-1-1" name="" cols="30" rows="4"></textarea></div>',r=0,d=0;$(".js-mirror"),$(".js-mirrorInput"),$(".js-moduleTrivia"),$(".js-moduleCodeword"),$(".js-moduleEmail"),$(".js-moduleVideo"),$(".js-moduleFeatured"),$(".js-moduleLead"),$(".js-moduleCoupon"),$(".js-moduleSurvey");$("body").on("keyup",".js-mirrorInput",function(){var e=$(this).data("mirror"),a=$(this).parents(".panel"),t=a.data("module"),i=$(this).val(),l=$('#previewModule [data-module="'+t+'"] [data-mirror="'+e+'"]'),s=$(this).parents(".panel").find(".panel-header .js-mirror");i.length>0?("Header"==e&&s.text(i),l.text(i)):("Header"==e&&s.text(""),l.text(""))}),$(".js-addButton").on("click",function(){var c=$(this).find(".js-menuOption").text(),p=($("#socialContainer"),"");switch(d++,1==d&&$("#widgetContainer").html("").removeClass("is-empty"),c){case"Visit Facebook Fanpage":p=a;break;case"Follow Twitter Account":p=t;break;case"Follow Instagram Account":p=l;break;case"Follow Pinterest Account":p=i;break;case"Watch Youtube Video":p=o;break;case"Visit Website":p=s;break;case"Watch Video Playlist":p=n;break;default:console.log("Loser")}$("#socialContainer").removeClass("is-empty"),$("#emptyState").addClass("u-is-transparent"),$("#socialContainer").append(e(c,p,d)),$("#socialContainer .panel").prev().addClass("is-collasped").removeClass("is-active"),$(".js-module").prev().hide(),r++,console.log(r+" Module(s) Added")}),$("body").on("click",".js-delete",function(){var e=$(this).parents(".panel"),a=e.data("module"),t=$('#previewModule [data-module="'+a+'"]');$("#deleteDialog").dialog({autoOpen:!1,modal:!0,minWidth:325,resizable:!1,draggable:!1,open:function(e,a){},buttons:[{text:"Delete module",class:"button-negative",click:function(){$(this).dialog("close"),e.hasClass("is-active")&&e.prev().addClass("is-active").removeClass("is-collasped"),e.remove(),t.prev().show(),t.remove(),r--,0===r&&($("#socialContainer").addClass("is-empty"),$("#previewModule").hide(),$("#emptyState").removeClass("u-is-transparent"))}},{text:"Cancel",class:"button-link",click:function(){$(this).dialog("close"),$(this).parent().removeClass("bounceInDown")}}]}),$("#deleteDialog").dialog("open"),console.log(r+" Modules Remaining"),console.log("Module "+a+" was removed")}),$("body").on("click",".js-collaspe",function(){var e=$(this).parents(".panel"),a=e.data("module"),t=$('#previewModule [data-module="'+a+'"]');e.hasClass("is-active")?e.toggleClass("is-collasped"):(e.addClass("is-active"),e.toggleClass("is-collasped"),e.siblings().addClass("is-collasped").removeClass("is-active"),t.show(),t.siblings().hide()),$("#campaignTotals").text(a+" out of "+r)}),$("#socialContainer").sortable({opacity:.8,cursor:"ns-resize",handle:".panel-header .js-sort",axis:"y",placeholder:"ui-sortable-placeholder",start:function(e,a){a.placeholder.height(a.item.outerHeight())}}),$("[contenteditable]").keydown(function(e){if(13===e.keyCode)return document.execCommand("insertHTML",!1,"<br><br>"),!1})});