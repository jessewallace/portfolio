$(document).ready(function(){function e(){bodyElement.removeClass(),logInSection.find(formField).val(""),updateForm.find(formField).val(""),regSection.find(formField).val(""),openModal.text("Sign Up or Log In"),greetingText.text("Welcome, Guest"),newPasswordIcnPos.addClass("is-hidden"),newPasswordIcnNeg.addClass("is-hidden"),updateSection.addClass("is-hidden"),mergeSection.addClass("is-hidden"),regSection.addClass("is-hidden"),logInSection.removeClass("is-hidden"),updateForm.removeClass("is-hidden"),updateButton.removeClass("is-hidden"),$(".modal__empty").addClass("is-hidden"),s()}function s(){messageContainer.addClass("is-hidden").removeClass("message--negative message--positive"),messageText.text("")}function n(){for(var e=0;e<emailArray.length;e++)if(emailEntered==emailArray[e])return!0;return!1}var d=$(".js-emailAddress");logInButton=$(".js-logIn"),logInSection=$(".js-logInSection"),updateButton=$(".js-updatePass"),updateSection=$(".js-updateSection"),updateForm=$(".js-updateForm"),mergeSection=$(".js-mergeSection"),mergeEmail=$(".js-mergeEmail"),mergeButton=$(".js-mergeAccounts"),messageContainer=$(".js-message"),messageText=$(".js-messageText"),loadingIcon=$(".js-loadingIcon"),loadingIconSibling=loadingIcon.prev(),newPassword=$(".js-newPass"),newPasswordIcnPos=$(".form__input-icon.is-positive"),newPasswordIcnNeg=$(".form__input-icon.is-negative"),confirmPass=$(".js-confirmPass"),regSection=$(".js-regSection"),registerButton=$(".js-register"),regEmail=$(".js-regEmail"),signUp=$(".js-signUp"),signIn=$(".js-signIn"),openModal=$(".js-openModal"),closeModal=$(".js-closeModal"),resetFlow=$(".js-resetFlows"),greetingText=$(".js-greeting"),genderButton=$(".modal__button--positive"),formField=$(".form__input"),bodyElement=$("body"),emailArray=[],modalOverlay=$(".overlay"),openModal.on("click",function(){bodyElement.hasClass("js-loggedIn")?e():(modalOverlay.addClass("is-opened"),bodyElement.addClass("has-modal"))}),closeModal.on("click",function(){modalOverlay.removeClass("is-opened"),e()}),genderButton.on("click",function(){$(this).addClass("is-selected").siblings().removeClass("is-selected")}),newPassword.on("blur",function(){newPassword.val().length>=8?(newPasswordIcnPos.removeClass("is-hidden"),newPasswordIcnNeg.addClass("is-hidden")):(newPasswordIcnPos.addClass("is-hidden"),newPasswordIcnNeg.removeClass("is-hidden"))}),logInButton.on("click",function(){emailEntered=d.val(),loadingIcon.removeClass("is-hidden"),loadingIconSibling.addClass("is-hidden"),s(),bodyElement.removeClass(),setTimeout(function(){emailEntered.indexOf("ed")>-1?(logInSection.addClass("is-hidden"),updateSection.removeClass("is-hidden"),bodyElement.addClass("js-flow1")):emailEntered.indexOf("mike")>-1?bodyElement.hasClass("js-accountsMerged")?(modalOverlay.removeClass("is-opened"),greetingText.text("Hello, Mike"),openModal.text("Log Out"),bodyElement.addClass("js-loggedIn")):(logInSection.addClass("is-hidden"),updateSection.removeClass("is-hidden"),mergeEmail.val(emailEntered),bodyElement.addClass("js-flow2")):n()?(modalOverlay.removeClass("is-opened"),greetingText.text("Hello, James"),openModal.text("Log Out"),bodyElement.addClass("js-loggedIn")):(bodyElement.addClass("js-flow3"),messageContainer.removeClass("is-hidden").addClass("message--negative"),messageText.text("This account does not exist. Check email address or create new account")),loadingIcon.addClass("is-hidden"),loadingIconSibling.removeClass("is-hidden")},1e3)}),updateButton.on("click",function(){var e=$(this);loadingIcon.removeClass("is-hidden"),loadingIconSibling.addClass("is-hidden"),setTimeout(function(){newPassword.val()===confirmPass.val()&&newPassword.val().length>=8?bodyElement.hasClass("js-flow1")?(updateForm.addClass("is-hidden"),e.addClass("is-hidden"),$(".modal__empty").removeClass("is-hidden"),setTimeout(function(){modalOverlay.removeClass("is-opened"),greetingText.text("Hello, Edward"),openModal.text("Log Out"),bodyElement.addClass("js-loggedIn js-accountUpdated")},1e3)):(updateSection.addClass("is-hidden"),mergeSection.removeClass("is-hidden")):alert("You don't match"),loadingIcon.addClass("is-hidden"),loadingIconSibling.removeClass("is-hidden")},1e3)}),mergeButton.on("click",function(){loadingIcon.removeClass("is-hidden"),loadingIconSibling.addClass("is-hidden"),setTimeout(function(){mergeSection.addClass("is-hidden"),logInSection.removeClass("is-hidden"),bodyElement.addClass("js-accountsMerged"),messageContainer.removeClass("is-hidden").addClass("message--positive"),messageText.text("Accounts merged Successfully! Log in"),loadingIcon.addClass("is-hidden"),loadingIconSibling.removeClass("is-hidden")},1e3)}),registerButton.on("click",function(){var e=regEmail.val(),s=$(".js-regName").val();loadingIcon.removeClass("is-hidden"),loadingIconSibling.addClass("is-hidden"),setTimeout(function(){e.indexOf("mike")>-1?(messageContainer.removeClass("is-hidden").addClass("message--negative"),messageText.html("An account with this email already exists. If this is your account, <a class='js-signIn' href='#'>click here</a> to log in.")):(modalOverlay.removeClass("is-opened"),greetingText.text("Hello, "+s),openModal.text("Log Out"),bodyElement.addClass("js-loggedIn"),emailArray.push(e)),loadingIcon.addClass("is-hidden"),loadingIconSibling.removeClass("is-hidden")},1e3)}),signUp.on("click",function(){regSection.removeClass("is-hidden"),logInSection.addClass("is-hidden"),s()}),$("body").on("click",".js-signIn",function(){regSection.addClass("is-hidden"),logInSection.removeClass("is-hidden"),s()})});