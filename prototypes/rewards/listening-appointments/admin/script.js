$(document).ready(function(){function e(e,t,i){var i="undefined"!=typeof i?i:"u-is-hidden";1==t?$(e).removeClass(i):$(e).addClass(i)}function t(e,t,i,n){e.on("addedfile",function(){setTimeout(function(){var e=$(t+" .dz-image img").attr("src"),a=$(t);"image"==n?$(i).attr("src",e):$(i).css("background-image","url("+e+")"),a.css("background-image","url("+e+")")},500)})}function i(e,t){$(e).css({"-webkit-transform":"translateX(-"+t+"%)","-moz-transform":"translateX(-"+t+"%)",transform:"translateX(-"+t+"%)"})}function n(e,t,i){var n=$(e).find(t).length;return shiftAmount=1/n*100,shiftAmount*i}function a(e,t){var i=$(e).find(t).length;parentWidth=100*i,childrenWidth=1/i*100,$(e).css({width:parentWidth+"%"})}var s=$("#livePreview"),o=($("#previewContent"),$("#campaignLogo"),$("#campaignTitle"),$("#campaignDescription"),$("#campaignSections")),r=($("#campaignBrand"),$(".js-subSection")),d=$(".js-loader"),c=$("#createDates"),l=$(".js-buttonShift").filter('[data-button="Next"]'),u=$("#publishedContainer"),b=$("#prePublishContainer"),h=($(".js-AnswerRow"),$("#recreateDates")),m=new Dropzone("#dropZoneLogo",{url:"/file/post",thumbnailWidth:500,thumbnailHeight:null,autoDiscover:!1});$(".ui-tooltip-icon").tooltip({position:{my:"right bottom+50"},tooltipClass:"entry-tooltip-positioner"}),t(m,"#dropZoneLogo",".td-widget-head__img, #campaignLogo","image"),$(".upload__remove-icon").on("click",function(){var e=$(this).parents(".js-dropZone"),t=$(this).data("target"),i=$('[data-target="'+t+'"]');switch(t){case"logo":i.attr("src","");break;case"background":i.css("background-image","none");break;default:console.log("This Target Does Not Exist")}e.css("background-image","none"),e.removeClass("dz-started"),e.find(".dz-preview").remove()});var g=$("#breadCrumbs");breadcrumb=$(".js-breadcrumb"),breadcrumbNumber=g.find(breadcrumb).length,breadcrumbActive=breadcrumb.children().filter(".is-active"),breadcrumbModule=breadcrumb.index(1),breadcrumb.on("click",function(){var t=$(this).index();console.log(t),i(o,n("#campaignSections",".js-subSection",t)),r.removeClass("is-active"),r.eq(t).addClass("is-active"),$(this).find(".breadcrumb__link").addClass("is-active"),$(this).siblings().find(".breadcrumb__link.is-active").removeClass("is-active"),0==t&&s.hasClass("has-content")&&($("#previewContent").show(),$("#previewModule").hide()),2==t?(e(".js-buttonPublish",!0),e(l,!1)):(e(".js-buttonPublish",!1),e(l,!0))});var p=0,v=0;$(".js-buttonShift").on("click",function(){var t=$(this).data("button"),n=33.33;"Next"==t?(r.removeClass("is-active"),r=r.next(),r.addClass("is-active"),v++,p+=n,i(o,p)):(r.removeClass("is-active"),r=r.prev(),r.addClass("is-active"),v--,p-=n,i(o,p)),2==v?(e(".js-buttonPublish",!0),e(l,!1)):(e(".js-buttonPublish",!1),e(l,!0)),console.log(v)}),a("#campaignSections",".js-subSection"),$(".js-timePicker").datetimepicker({datepicker:!1,format:"H:i"}),$(".js-datePicker").datetimepicker({timepicker:!1,format:"m/d/Y"}),$(".js-loadDates").on("blur",function(){$(this).val()&&(e(d,!0),setTimeout(function(){e(d,!1),e(".js-answerDates",!0)},1e3))}),$("body").on("blur",".js-answerInput",function(){var e=$(this).val(),t=$(this).parent(),i=t.next().find(".js-matchInput"),n=$(".js-matchInput"),a=e.substring(0,3).toLowerCase();e.length>0&&""===n.val()&&i.val(a)}),$("body").on("keydown",".js-matchInput",function(e){var t=$(this).parent().closest("js-AnswerRow");t.next("");9==e.which&&$("#answerBody").append(w)}),$("#dropdownMenuButton").on("click",function(){$(".dropdown--add").toggleClass("open")}),$(".js-timeFrame").on("click",function(){$("#timeDaily:checked").length>0?($("#dailyToggle").removeClass("u-is-hidden"),$("#weeklyToggle").addClass("u-is-hidden")):($("#dailyToggle").addClass("u-is-hidden"),$("#weeklyToggle").removeClass("u-is-hidden"))});var f=0;$(".js-buttonToggle").on("click",function(){f++,$(".js-answerInput").val()&&f>0&&(h.dialog({autoOpen:!1,modal:!0,minWidth:425,resizable:!1,draggable:!1,open:function(e,t){$(".ui-dialog-titlebar-close",t.dialog|t).hide()},buttons:[{text:"Change Day","class":"button-highlight",click:function(){$(this).dialog("close"),$(this).parent().removeClass("bounceInDown")}},{text:"Go Back","class":"button",click:function(){$(this).dialog("close"),$(this).parent().removeClass("bounceInDown")}}]}),h.dialog("open"))});var w='<div class="tr js-AnswerRow"><div class="td">1/23/2017 Mon</div><div class="td"><input class="js-answerInput" type="text"></div><div class="td"><input class="width-1-2 js-matchInput" type="text" maxlength="3"></div></div>';c.on("click",function(){var t=$(".js-numberInstances").val();console.log(t),e(d,!0),setTimeout(function(){e(d,!1),$(".dropdown--add").removeClass("open");for(var i=0;t>i;i++)$("#answerBody").append(w)},1e3)}),$("#cancelAdd").on("click",function(){$(".dropdown--add").removeClass("open")}),$(".js-buttonToggle").on("click",function(){c.is("[disabled=disabled]")&&c.text("Generate New Dates").attr("disabled",!1)}),$(".js-radioBtn").on("click",function(){var e=$("#certainDateRadio").parent(),t=e.siblings(),i=$("#setNumberRadio").parent(),n=i.siblings();$("#certainDateRadio:checked").length>0?(t.attr("disabled",!1),n.attr("disabled",!0)):(t.attr("disabled",!0),n.attr("disabled",!1))}),$(".js-buttonPublish").on("click",function(){e(b,!1),e(u,!0),$(this).text("Go to Dashboard")}),$(".js-showMore").on("click",function(){$(".js-answerTable").toggleClass("is-expanded"),$(this).text("Show Less"==$(this).text()?"Show More":"Show Less")})});