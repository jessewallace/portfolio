!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";function t(t,o){var a,s=i('<div class="minicolors" />'),n=i.minicolors.defaults;t.attr("data-opacity");t.data("minicolors-initialized")||(o=i.extend(!0,{},n,o),s.addClass("minicolors-theme-"+o.theme).toggleClass("minicolors-with-opacity",o.opacity).toggleClass("minicolors-no-data-uris",o.dataUris!==!0),void 0!==o.position&&i.each(o.position.split(" "),function(){s.addClass("minicolors-position-"+this)}),a="rgb"===o.format?o.opacity?"25":"20":o.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",o).prop("size",a).wrap(s).after('<div class="minicolors-panel minicolors-slider-'+o.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),o.inline||(t.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-swatch").on("click",function(i){i.preventDefault(),t.focus()})),t.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),o.inline&&t.parent().addClass("minicolors-inline"),e(t,!1),t.data("minicolors-initialized",!0))}function o(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function a(i){var t=i.parent(),o=t.find(".minicolors-panel"),a=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(s(),t.addClass("minicolors-focus"),o.stop(!0,!0).fadeIn(a.showSpeed,function(){a.show&&a.show.call(i.get(0))}))}function s(){i(".minicolors-focus").each(function(){var t=i(this),o=t.find(".minicolors-input"),a=t.find(".minicolors-panel"),s=o.data("minicolors-settings");a.fadeOut(s.hideSpeed,function(){s.hide&&s.hide.call(o.get(0)),t.removeClass("minicolors-focus")})})}function n(i,t,o){var a,s,n,e,c=i.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),h=i.find("[class$=-picker]"),d=i.offset().left,u=i.offset().top,p=Math.round(t.pageX-d),g=Math.round(t.pageY-u),m=o?l.animationSpeed:0;t.originalEvent.changedTouches&&(p=t.originalEvent.changedTouches[0].pageX-d,g=t.originalEvent.changedTouches[0].pageY-u),0>p&&(p=0),0>g&&(g=0),p>i.width()&&(p=i.width()),g>i.height()&&(g=i.height()),i.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(a=75-p,s=75-g,n=Math.sqrt(a*a+s*s),e=Math.atan2(s,a),0>e&&(e+=2*Math.PI),n>75&&(n=75,p=75-75*Math.cos(e),g=75-75*Math.sin(e)),p=Math.round(p),g=Math.round(g)),i.is(".minicolors-grid")?h.stop(!0).animate({top:g+"px",left:p+"px"},m,l.animationEasing,function(){r(c,i)}):h.stop(!0).animate({top:g+"px"},m,l.animationEasing,function(){r(c,i)})}function r(i,t){function o(i,t){var o,a;return i.length&&t?(o=i.offset().left,a=i.offset().top,{x:o-t.offset().left+i.outerWidth()/2,y:a-t.offset().top+i.outerHeight()/2}):null}var a,s,n,r,e,l,h,u,p=i.val(),g=i.attr("data-opacity"),f=i.parent(),v=i.data("minicolors-settings"),b=f.find(".minicolors-swatch"),y=f.find(".minicolors-grid"),w=f.find(".minicolors-slider"),M=f.find(".minicolors-opacity-slider"),k=y.find("[class$=-picker]"),I=w.find("[class$=-picker]"),S=M.find("[class$=-picker]"),z=o(k,y),F=o(I,w),j=o(S,M);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(v.control){case"wheel":r=y.width()/2-z.x,e=y.height()/2-z.y,l=Math.sqrt(r*r+e*e),h=Math.atan2(e,r),0>h&&(h+=2*Math.PI),l>75&&(l=75,z.x=69-75*Math.cos(h),z.y=69-75*Math.sin(h)),s=m(l/.75,0,100),a=m(180*h/Math.PI,0,360),n=m(100-Math.floor(F.y*(100/w.height())),0,100),p=C({h:a,s:s,b:n}),w.css("backgroundColor",C({h:a,s:s,b:100}));break;case"saturation":a=m(parseInt(z.x*(360/y.width()),10),0,360),s=m(100-Math.floor(F.y*(100/w.height())),0,100),n=m(100-Math.floor(z.y*(100/y.height())),0,100),p=C({h:a,s:s,b:n}),w.css("backgroundColor",C({h:a,s:100,b:n})),f.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":a=m(parseInt(z.x*(360/y.width()),10),0,360),s=m(100-Math.floor(z.y*(100/y.height())),0,100),n=m(100-Math.floor(F.y*(100/w.height())),0,100),p=C({h:a,s:s,b:n}),w.css("backgroundColor",C({h:a,s:s,b:100})),f.find(".minicolors-grid-inner").css("opacity",1-n/100);break;default:a=m(360-parseInt(F.y*(360/w.height()),10),0,360),s=m(Math.floor(z.x*(100/y.width())),0,100),n=m(100-Math.floor(z.y*(100/y.height())),0,100),p=C({h:a,s:s,b:n}),y.css("backgroundColor",C({h:a,s:100,b:100}))}if(g=v.opacity?parseFloat(1-j.y/M.height()).toFixed(2):1,v.opacity&&i.attr("data-opacity",g),"rgb"===v.format){var D=x(p),g=""===i.attr("data-opacity")?1:m(parseFloat(i.attr("data-opacity")).toFixed(2),0,1);(isNaN(g)||!v.opacity)&&(g=1),u=i.minicolors("rgbObject").a<=1&&D&&v.opacity?"rgba("+D.r+", "+D.g+", "+D.b+", "+parseFloat(g)+")":"rgb("+D.r+", "+D.g+", "+D.b+")"}else u=d(p,v.letterCase);i.val(u)}b.find("span").css({backgroundColor:p,opacity:g}),c(i,u,g)}function e(t,o){var a,s,n,r,e,l,h,b,w,k,x=t.parent(),I=t.data("minicolors-settings"),S=x.find(".minicolors-swatch"),z=x.find(".minicolors-grid"),F=x.find(".minicolors-slider"),j=x.find(".minicolors-opacity-slider"),D=z.find("[class$=-picker]"),T=F.find("[class$=-picker]"),L=j.find("[class$=-picker]");switch(f(t.val())?(a=y(t.val()),e=m(parseFloat(v(t.val())).toFixed(2),0,1),e&&t.attr("data-opacity",e)):a=d(u(t.val(),!0),I.letterCase),a||(a=d(g(I.defaultValue,!0),I.letterCase)),s=M(a),r=I.keywords?i.map(I.keywords.split(","),function(t){return i.trim(t.toLowerCase())}):[],l=""!==t.val()&&i.inArray(t.val().toLowerCase(),r)>-1?d(t.val()):f(t.val())?p(t.val()):a,o||t.val(l),I.opacity&&(n=""===t.attr("data-opacity")?1:m(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(n)&&(n=1),t.attr("data-opacity",n),S.find("span").css("opacity",n),b=m(j.height()-j.height()*n,0,j.height()),L.css("top",b+"px")),"transparent"===t.val().toLowerCase()&&S.find("span").css("opacity",0),S.find("span").css("backgroundColor",a),I.control){case"wheel":w=m(Math.ceil(.75*s.s),0,z.height()/2),k=s.h*Math.PI/180,h=m(75-Math.cos(k)*w,0,z.width()),b=m(75-Math.sin(k)*w,0,z.height()),D.css({top:b+"px",left:h+"px"}),b=150-s.b/(100/z.height()),""===a&&(b=0),T.css("top",b+"px"),F.css("backgroundColor",C({h:s.h,s:s.s,b:100}));break;case"saturation":h=m(5*s.h/12,0,150),b=m(z.height()-Math.ceil(s.b/(100/z.height())),0,z.height()),D.css({top:b+"px",left:h+"px"}),b=m(F.height()-s.s*(F.height()/100),0,F.height()),T.css("top",b+"px"),F.css("backgroundColor",C({h:s.h,s:100,b:s.b})),x.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":h=m(5*s.h/12,0,150),b=m(z.height()-Math.ceil(s.s/(100/z.height())),0,z.height()),D.css({top:b+"px",left:h+"px"}),b=m(F.height()-s.b*(F.height()/100),0,F.height()),T.css("top",b+"px"),F.css("backgroundColor",C({h:s.h,s:s.s,b:100})),x.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:h=m(Math.ceil(s.s/(100/z.width())),0,z.width()),b=m(z.height()-Math.ceil(s.b/(100/z.height())),0,z.height()),D.css({top:b+"px",left:h+"px"}),b=m(F.height()-s.h/(360/F.height()),0,F.height()),T.css("top",b+"px"),z.css("backgroundColor",C({h:s.h,s:100,b:100}))}t.data("minicolors-initialized")&&c(t,l,n)}function c(i,t,o){var a=i.data("minicolors-settings"),s=i.data("minicolors-lastChange");s&&s.value===t&&s.opacity===o||(i.data("minicolors-lastChange",{value:t,opacity:o}),a.change&&(a.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(i.get(0),t,o)},a.changeDelay))):a.change.call(i.get(0),t,o)),i.trigger("change").trigger("input"))}function l(t){var o=u(i(t).val(),!0),a=x(o),s=i(t).attr("data-opacity");return a?(void 0!==s&&i.extend(a,{a:parseFloat(s)}),a):null}function h(t,o){var a=u(i(t).val(),!0),s=x(a),n=i(t).attr("data-opacity");return s?(void 0===n&&(n=1),o?"rgba("+s.r+", "+s.g+", "+s.b+", "+parseFloat(n)+")":"rgb("+s.r+", "+s.g+", "+s.b+")"):null}function d(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function u(i,t){return i=i.replace(/^#/g,""),i.match(/^[A-F0-9]{3,6}/gi)?3!==i.length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i):""}function p(i,t){var o=i.replace(/[^\d,.]/g,""),a=o.split(",");return a[0]=m(parseInt(a[0],10),0,255),a[1]=m(parseInt(a[1],10),0,255),a[2]=m(parseInt(a[2],10),0,255),a[3]&&(a[3]=m(parseFloat(a[3],10),0,1)),t?{r:a[0],g:a[1],b:a[2],a:a[3]?a[3]:null}:"undefined"!=typeof a[3]&&a[3]<=1?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function g(i,t){return f(i)?p(i):u(i,t)}function m(i,t,o){return t>i&&(i=t),i>o&&(i=o),i}function f(i){var t=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!t||4!==t.length)}function v(i){var i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i);return i&&6===i.length?i[4]:"1"}function b(i){var t={},o=Math.round(i.h),a=Math.round(255*i.s/100),s=Math.round(255*i.b/100);if(0===a)t.r=t.g=t.b=s;else{var n=s,r=(255-a)*s/255,e=(n-r)*(o%60)/60;360===o&&(o=0),60>o?(t.r=n,t.b=r,t.g=r+e):120>o?(t.g=n,t.b=r,t.r=n-e):180>o?(t.g=n,t.r=r,t.b=r+e):240>o?(t.b=n,t.r=r,t.g=n-e):300>o?(t.b=n,t.g=r,t.r=r+e):360>o?(t.r=n,t.g=r,t.b=n-e):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function y(i){return i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),i&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}function w(t){var o=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return i.each(o,function(i,t){1===t.length&&(o[i]="0"+t)}),"#"+o.join("")}function C(i){return w(b(i))}function M(i){var t=k(x(i));return 0===t.s&&(t.h=360),t}function k(i){var t={h:0,s:0,b:0},o=Math.min(i.r,i.g,i.b),a=Math.max(i.r,i.g,i.b),s=a-o;return t.b=a,t.s=0!==a?255*s/a:0,0!==t.s?i.r===a?t.h=(i.g-i.b)/s:i.g===a?t.h=2+(i.b-i.r)/s:t.h=4+(i.r-i.g)/s:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function x(i){return i=parseInt(i.indexOf("#")>-1?i.substring(1):i,16),{r:i>>16,g:(65280&i)>>8,b:255&i}}i.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},i.extend(i.fn,{minicolors:function(n,r){switch(n){case"destroy":return i(this).each(function(){o(i(this))}),i(this);case"hide":return s(),i(this);case"opacity":return void 0===r?i(this).attr("data-opacity"):(i(this).each(function(){e(i(this).attr("data-opacity",r))}),i(this));case"rgbObject":return l(i(this),"rgbaObject"===n);case"rgbString":case"rgbaString":return h(i(this),"rgbaString"===n);case"settings":return void 0===r?i(this).data("minicolors-settings"):(i(this).each(function(){var t=i(this).data("minicolors-settings")||{};o(i(this)),i(this).minicolors(i.extend(!0,t,r))}),i(this));case"show":return a(i(this).eq(0)),i(this);case"value":return void 0===r?i(this).val():(i(this).each(function(){"object"==typeof r?(r.opacity&&i(this).attr("data-opacity",m(r.opacity,0,1)),r.color&&i(this).val(r.color)):i(this).val(r),e(i(this))}),i(this));default:return"create"!==n&&(r=n),i(this).each(function(){t(i(this),r)}),i(this)}}}),i(document).on("mousedown.minicolors touchstart.minicolors",function(t){i(t.target).parents().add(t.target).hasClass("minicolors")||s()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var o=i(this);t.preventDefault(),i(document).data("minicolors-target",o),n(o,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var o=i(document).data("minicolors-target");o&&n(o,t)}).on("mouseup.minicolors touchend.minicolors",function(){i(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(t){var o=i(this).parent().find(".minicolors-input");t.preventDefault(),a(o)}).on("focus.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&a(t)}).on("blur.minicolors",".minicolors-input",function(){var t,o,a,s,n,r=i(this),e=r.data("minicolors-settings");r.data("minicolors-initialized")&&(t=e.keywords?i.map(e.keywords.split(","),function(t){return i.trim(t.toLowerCase())}):[],""!==r.val()&&i.inArray(r.val().toLowerCase(),t)>-1?n=r.val():(f(r.val())?a=p(r.val(),!0):(o=u(r.val(),!0),a=o?x(o):null),n=null===a?e.defaultValue:"rgb"===e.format?p(e.opacity?"rgba("+a.r+","+a.g+","+a.b+","+r.attr("data-opacity")+")":"rgb("+a.r+","+a.g+","+a.b+")"):w(a)),s=e.opacity?r.attr("data-opacity"):1,"transparent"===n.toLowerCase()&&(s=0),r.closest(".minicolors").find(".minicolors-swatch > span").css("opacity",s),r.val(n),""===r.val()&&r.val(g(e.defaultValue,!0)),r.val(d(r.val(),e.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var o=i(this);if(o.data("minicolors-initialized"))switch(t.keyCode){case 9:s();break;case 13:case 27:s(),o.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&e(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&setTimeout(function(){e(t,!0)},1)})});