_See.Slidepuzzle={templates:{},Game:function(e){function s(){if(v.hasPlayer()&&!v.activePlayer())return t("playerstopped");switch(p.footer.show(),p.board.hide(),g.setting){case 3:g.pieceSize=166;break;case 4:g.pieceSize=125;break;case 5:g.pieceSize=100}return l("000",".see-footer",300),l("000",".see-results",300),p.removeClass("size-3 size-4 size-5").addClass("size-"+g.size),!v.hasPlayer()&&h.checkPlayAd(g.plays)?(t("videoad"),h.playAd(),void 0):(g.start(i),void 0)}function i(){g.plays++,g.score=0,g.moves="",g.movesCount=0;var e;clearInterval(e),p.removeClass("see-solved"),u.close(),m.emit("gameStart"),b=new r(g.size,g.gameseed),n(),a(),p.board.show(),_See.GameCore.execAction(d,"onPlay")}function o(){p.addClass("see-solved"),p.board.find(".see-piece").off("touchstart mousedown"),p.board.find(".see-piece-hole").css({top:(g.size-1)*g.pieceSize,left:(g.size-1)*g.pieceSize}).show(),g.complete({p1:g.moves,p2:g.movesCount,p3:g.gameseed}),u.open("completegame"),m.emit("gameComplete"),_See.GameCore.execAction(d,"onFinish")}function t(e){_See.debug&&console.info("slidepuzzle.stopGame : ",e),m.emit("gameStop"),e&&u.open(e)}function n(){var e=b.grid(),s=0,i=0,o="",t="",n="",a=g.img;for(s=0;s<g.size;s++)for(i=0;i<g.size;i++)n=e[s][i]===!1?"hole":e[s][i],t="hole"==n?"":n+1,o+='<span class="see-piece see-piece-'+n+'" data-piece="'+n+'" style="top:'+s*g.pieceSize+"px; left:"+i*g.pieceSize+'px;"><span class="see-piece-hint">'+t+"</span></span>";if(p.board.html(o),!a){var r=_See.GameCore.getConfigSetting(d,"images",[]);a=r.length?r[Math.floor(Math.random()*r.length)]:_See.getBaseUrl(!0)+"/app/public/images/puzzles/puzzle."+(Math.floor(27*Math.random())+1)+".jpg"}for(p.find(".see-piece").css({"background-image":"url('"+a+"')"}),s=0;s<g.size;s++)for(i=0;i<g.size;i++)n=s+i*g.size,n==g.size*g.size-1&&(n="hole"),p.find(".see-piece-"+n).css({"background-position":s*-g.pieceSize+"px "+i*-g.pieceSize+"px"});p.board.find(".see-piece").onTap(function(e){b.clickPiece(e.target)})}function a(){p.footer.moves.html(g.movesCount+" move"+(1==g.movesCount?"":"s"));var e=b.grid(),s=!0,i=0,t=0,n=0;for(t=0;t<g.size;t++)for(n=0;n<g.size;n++){if(i!=e[t][n]&&e[t][n]!==!1){s=!1;break}i++}s&&o()}function r(e,s){function i(s){var i,o,l=_See.$(s).data("piece"),m=0,u=0,v=0;if(0>l||l>=r)return!1;if(o=n[l].y,i=n[l].x,d.y!=o&&d.x!=i)return!1;o==d.y?v=i<d.x?-1:1:u=o<d.y?-1:1,m=Math.abs(d.y-o+d.x-i);var f=d.y==o?"left":"top",b={},h={y:d.y,x:d.x},z=-1,S=0;b[f]=(0>v||0>u?"+":"-")+"="+g.pieceSize+"px";for(var y=0;m>y;y++)h.y+=u,h.x+=v,S=h.y*e+h.x,t(S),z=c[h.y][h.x],n[z].y=d.y,n[z].x=d.x,c[d.y][d.x]=z,c[h.y][h.x]=!1,d.y=h.y,d.x=h.x,_See.debug&&console.log(h.y,h.x,"Piece: "+z,S),_See.$.browser.mobileDevice?p.board.find(".see-piece-"+z).css(b,200):p.board.find(".see-piece-"+z).animate(b,200);return a(),!0}function t(e){var s=g.moves.length,i=g.gameseed.charCodeAt(s%g.gameseed.length)-97;g.moves.length<150&&(g.moves+=String.fromCharCode((e+i)%26+97)),g.movesCount++,g.movesCount>1e3&&o(),1==g.movesCount&&(g.timer=null,sessionTimer=setInterval(function(){g.timer++},"1000")),l(g.movesCount,".see-footer",300)}var n=[],r=e*e-1,c=[],d={y:0,x:0},m=0,u=0,v=0,f=0;if(s.length!=e*e)return _See.debug&&console.log("Slidepuzzle: error, seed isn't correct size: ",s,e),!1;for(u=0;e>u;u++)for(c[u]=[],v=0;e>v;v++)f=s.charCodeAt(m)-97,25!=f?(n[f]={y:u,x:v},c[u][v]=f):(c[u][v]=!1,d.y=u,d.x=v),m++;return{piecesCount:r,clickPiece:function(e){return i(e)},grid:function(){return c}}}function l(e,s,i){function o(e){switch(parseInt(e)){case 0:return"0";case 1:return"-100%";case 2:return"-200%";case 3:return"-300%";case 4:return"-400%";case 5:return"-500%";case 6:return"-600%";case 7:return"-700%";case 8:return"-800%";case 9:return"-900%"}}var t=e.toString().length;switch(t){case 1:$(s+" .see-moves-digit-3").animate({top:o(e)},i);break;case 2:var n=e.toString().charAt(0),a=e.toString().charAt(1);$(s+" .see-moves-digit-2").animate({top:o(n)},i),$(s+" .see-moves-digit-3").animate({top:o(a)},i);break;case 3:var n=e.toString().charAt(0),a=e.toString().charAt(1),r=e.toString().charAt(2);$(s+" .see-moves-digit-1").animate({top:o(n)},i),$(s+" .see-moves-digit-2").animate({top:o(a)},i),$(s+" .see-moves-digit-3").animate({top:o(r)},i)}}function c(){var e=Math.floor(g.timer/60),s=g.timer%60;$(".see-completion-time strong").eq(0).html(e),$(".see-completion-time strong").eq(1).html(s)}_See.$(e).html('<div class="see-board"/><div class="see-footer" ><div class="see-newgame-wrapper"><img class="see-new" src="img/left-square-2.png" alt=new game" /></div><button class="see-shuffle">Shuffle</button><button class="see-help">Hints</button><div class="see-howto-wrapper"><img class="see-howto" src="img/question-2.png" alt="how to play" /></div><div class="see-moves-wrapper">Total Moves<br/><div class="see-moves-digit"><div class="see-moves-digit-1">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div><div class="see-moves-digit"><div class="see-moves-digit-2">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div><div class="see-moves-digit"><div class="see-moves-digit-3">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div></div></div><div class="see-modal"/><div class="see-login">Login to keep the points you win from playing! <a>Log in now</a></div>');var d="slidepuzzle",p=new _See.GameCore.DOM(e),m=new _See.GameCore.Events(e),u=new _See.GameCore.Modals(p,m),g=new _See.GameCore.Session("slidepuzzle",m),v=new _See.GameCore.Status(m),f=new _See.GameCore.User("slidepuzzle",m,p),b={},h=new _See.GameCore.Ads(d,m);g.setting=1,g.size=4,g.pieceSize=125,g.plays=0,p.board=p.find(".see-board"),p.header=p.find(".see-header"),p.header.title=p.header.find("h2"),p.modal=p.find(".see-modal").hide(),p.footer=p.find(".see-footer"),p.footer.moves=p.footer.find(".see-moves"),p.login=p.find(".see-login"),p.footer.find("img.see-new").onTap(function(){u.open("newgame")}),p.find("button.see-help").onTap(function(){p.toggleClass("see-help")}),p.find("img.see-howto").onTap(function(){"howto"!=u.getCurrent()?u.open("howto"):u.close()}),p.login.find("a").on("click",f.doLogin),_See.GameCore.execAction(d,"onLoad"),u.add("newgame",{html:'<div class="see-logo">Pic<span class="blue">Slide</span></div><div class="see-start-wrapper"><div class="see-start">Select Difficulty to Start</div><div class="see-button easy" data-setting="3">Easy<span class="see-points-value">500 Pts</span></div><div class="see-button medium" data-setting="4">Medium<span class="see-points-value">1500 Pts</span></div><div class="see-button hard" data-setting="5">Hard<span class="see-points-value">2500 Pts</span></div></div>',styleClass:"see-newgame",onOpen:function(e){e.find(".see-button").onTap(function(e){g.setting=_See.$(e.target).data("setting"),g.size=_See.$(e.target).data("setting"),s()}),l("000",".see-footer",300),l("000",".see-results",300)}}),u.add("howto",{html:'<span class="see-close" /><div class="see-howto-wrapper"><h3>How to Play</h3><br/><p>The goal of this game is to maneuver the tiles into their correct positions by sliding the tiles onto the empty space until the tiles form a complete picture.</p><br/><p>You can click on a tile adjacent to the empty space to move that tile into the empty space. You can also move multiple tiles by clicking a row or column of tiles that occupies the same row or column as the empty space.</p><br/><p>To win, arrange the tiles in the correct order from left-to-right and top-to-bottom in the smallest amount of moves possible. Each move that you make is tracked by a counter found above the game board to help you keep track of your progress.</p><br/><p>Completing the puzzle will earn you points. Higher difficulty puzzles will award greater amounts of points for their completion.</p></div>',styleClass:"see-howto",onOpen:function(e){e.find(".see-close").onTap(function(){u.close()})}}),u.add("completegame",{html:function(){return'<div class="see-logo">Pic<span class="blue">Slide</span></div><div class="see-solved"><img src="img/thumbs-up-1.png" />Puzzle Solved!!</div><div class="see-results"><div class="see-moves-wrapper">Total Moves<br/><div class="see-moves-digit"><div class="see-moves-digit-1">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div><div class="see-moves-digit"><div class="see-moves-digit-2">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div><div class="see-moves-digit"><div class="see-moves-digit-3">0<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</div></div><span class="see-completion-time" >Time: <strong></strong> min <strong></strong> sec</span></div><div class="see-results-level"><div class="see-results-stars"><span class="filled" /><span /><span /></div><div class="see-results-text">Puzzle Completed in less than <span>30 moves</span></div></div></div><div class="see-options"><button class="see-play-again">Play Again</button><button class="see-choose-difficulty">Choose New Difficulty</button></div>'},styleClass:"see-complete",onOpen:function(e){e.find(".see-choose-difficulty").onTap(function(){u.open("newgame")}),e.find(".see-play-again").onTap(function(){s()}),e.find(".see-share").on("click",function(){_See.GameCore.fbShare("I solved a "+g.size+"x"+g.size+" puzzle in "+g.movesCount+" moves in PicSlide","PicSlide is a puzzle game where you move tiles to assemble a picture in the least amount of moves, and playing earns points toward rewards!","Want to see if you can beat my score of "+g.movesCount+" moves on a "+g.size+"x"+g.size+" puzzle in PicSlide?","http://"+(_See.config.cdn?_See.config.cdn:_See.config.serverName)+"/app/public/images/puzzles/fbshare.jpg")}),_See.config.tsso_share||e.find(".see-share").remove().end().find(".playagain").css({top:"390px"});setTimeout(function(){l(g.movesCount,".see-results",1e3)},"1000");clearInterval(sessionTimer),c()}}),u.add("signin",{html:'<div class="canvas"><h3>Sign In</h3><p>You must be signed in to continue playing. <br/><a href="#" class="see-do-login">Log in</a> or <a href="#" class="see-do-register">Sign up</a> to continue.</p></div>',styleClass:"see-signin see-messagemodal",onOpen:function(e){e.find("a.see-do-login").onTap(function(){f.doLogin("login")}).end().find("a.see-do-register").onTap(function(){f.doLogin("register")})}}),m.on("playerStop",function(){t("playerstopped")}).on("playerStart userLoggedIn userLoggedOut",function(){t("newgame")}).on("adFinish",function(){g.start(i)}),_See.debug&&console.log("new slidepuzzle game"),u.open("newgame")},init:function(){_See.debug&&console.log("Slidepuzzle: Init"),_See.triggerEvent("SlidepuzzleReady")},initWidget:function(e){_See.debug&&console.log("Slidepuzzle: InitWidget."),e.game=new this.Game(e)}},_See.registerWidget(_See.Slidepuzzle),$('head link[rel="stylesheet"]').remove();